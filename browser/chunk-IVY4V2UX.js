import{A as u,B as l,C as o,q as k,v as x,z as n}from"./chunk-WO2UHFSD.js";import"./chunk-AQEFRMF6.js";import{G as g,H as F}from"./chunk-26LTUHHF.js";import"./chunk-TBYF2LDC.js";import{$ as a,Hb as b,a as d,b as f,ea as y,f as S,gb as v,sc as R,xa as q}from"./chunk-7JRIQJWH.js";var i=class e extends n{static \u0275fac=(()=>{let t;return function(p){return(t||(t=q(e)))(p||e)}})();static \u0275prov=a({token:e,factory:e.\u0275fac})};var c=S(k()),A=u(),D=({statusCode:e}={})=>[{key:"fromDate",label:"from_date",value:(0,c.default)().subtract(1,"day").toDate(),inputType:o.datetime},{key:"toDate",label:"to_date",value:(0,c.default)().toDate(),inputType:o.datetime},{key:"url",label:"url",inputType:o.text},{key:"statusCode",label:"statusCode",value:e,disabled:e!=null,inputType:o.number},{key:"user",label:"user",inputType:o.text},{key:"method",label:"method",inputType:o.multiSelect,multiSelectConfiguration:{filterBy:"key",optionLabel:"title",valueBy:"key",options:["GET","POST","PATCH","PUT","DELETE"].map(t=>({key:t,title:t}))}}];var m=class extends l{activatedRoute=y(g);get exception(){return this.activatedRoute.snapshot.data.exception==!0}constructor(){super()}columns=this.tableColumns();tableActions=()=>[{key:x.view_new_tab,label:"view",icon:"pi pi-eye"}];tableColumns(){let t=[{key:"request.user",title:"user",valueFn:({user:r={}})=>r?.id?.toString()??r?._id?.toString()??"-"},{key:"method",title:"method"},{key:"url",title:"url"},{key:"response.statusCode",title:"statusCode",ngStyleFn:r=>({color:r.success==!1?"red":"green"})},{key:"duration",title:"duration-ms"},{key:"createdAt",title:"createdAt",dateFormat:"yyyy-MM-dd HH:mm"}];return this.exception||t.push({key:"success",title:"success",templateRef:!0}),t}filterSchema={filterDto:f(d({},u()),{exception:this.exception?"true":void 0}),inputs:D({statusCode:this.exception?500:void 0})}};var s=class e extends m{constructor(){super()}endPoints={index:"monitoring/requests",view:({id:t})=>`monitoring/requests/view/${t}`};userKey="id";static \u0275fac=function(r){return new(r||e)};static \u0275prov=a({token:e,factory:e.\u0275fac})};var h=class e{static \u0275fac=function(r){return new(r||e)};static \u0275cmp=v({type:e,selectors:[["app-requests"]],features:[R([s,i,{provide:l,useExisting:s},{provide:n,useExisting:i}])],decls:1,vars:0,template:function(r,p){r&1&&b(0,"router-outlet")},dependencies:[F],encapsulation:2})};export{h as Requests};
